{
  "types": {
    "ERPEnum": {
      "fun": "Union",
      "args": [
        {
          "case": "ERP:SAP",
          "fields": {}
        },
        {
          "case": "ERP:BC",
          "fields": {}
        },
        {
          "case": "ERP:FAndO",
          "fields": {}
        }
      ]
    },
    "GlobalConfiguration": {
      "extends": [],
      "fields": {
        "IsAdmin": "boolean",
        "ERP": "ERPEnum"
      }
    },
    "CollectionReference": {
      "extends": [],
      "fields": {
        "DisplayValue": "string",
        "Id": "guid"
      }
    },
    "CityRef": {
      "extends": ["CollectionReference"],
      "fields": {}
    },
    "LandArea": {
      "fields": {
        "x": "number",
        "y": "number"
      }
    },
    "PlotInfo": {
      "fields": {
        "landArea": "LandArea"
      }
    },
    "Address": {
      "fields": {
        "street": "string",
        "number": "number",
        "city": {
          "fun": "SingleSelection",
          "args": ["CityRef"]
        }
      }
    },
    "PermissionsEnum": {
      "fun": "Union",
      "args": [
        {
          "case": "Create",
          "fields": {}
        },
        {
          "case": "Read",
          "fields": {}
        },
        {
          "case": "Update",
          "fields": {}
        },
        {
          "case": "Delete",
          "fields": {}
        }
      ]
    },
    "PermissionRef": {
      "fields": {
        "Value": "PermissionsEnum"
      }
    },
    "DepartmentRef": {
      "extends": ["CollectionReference"],
      "fields": {}
    },
    "Person": {
      "fields": {
        "plotInfo": "PlotInfo",
        "dependants": {
          "fun": "Map",
          "args": ["string", "injectedCategory"]
        },
        "relatives": {
          "fun": "List",
          "args": ["injectedCategory"]
        },
        "departments": {
          "fun": "MultiSelection",
          "args": ["DepartmentRef"]
        },
        "mainAddress": "Address",
        "addresses": {
          "fun": "List",
          "args": ["Address"]
        },
        "subscribeToNewsletter": "boolean",
        "emails": {
          "fun": "List",
          "args": ["string"]
        },
        "permissions": {
          "fun": "Map",
          "args": [
            {
              "fun": "SingleSelection",
              "args": ["PermissionRef"]
            },
            "boolean"
          ]
        },
        "cityByDepartment": {
          "fun": "Map",
          "args": [
            {
              "fun": "SingleSelection",
              "args": ["DepartmentRef"]
            },
            {
              "fun": "SingleSelection",
              "args": ["CityRef"]
            }
          ]
        }
      }
    }
  },
  "apis": {
    "enumOptions": {
      "permissions": "PermissionRef"
    },
    "searchableStreams": {
      "cities": "CityRef",
      "departments": "DepartmentRef"
    }
  },
  "forms": {
    "landArea": {
      "type": "LandArea",
      "fields": {
        "x": {
          "renderer": "defaultNumber",
          "visible": true
        },
        "y": {
          "renderer": "defaultNumber",
          "visible": true
        }
      },
      "tabs": {
        "main": {
          "columns": {
            "main": {
              "groups": {
                "main": ["x", "y"]
              }
            }
          }
        }
      }
    },
    "plotInfo": {
      "type": "PlotInfo",
      "fields": {
        "landArea": {
          "renderer": "landArea",
          "visible": true
        }
      },
      "tabs": {
        "main": {
          "columns": {
            "main": {
              "groups": {
                "main": ["landArea"]
              }
            }
          }
        }
      }
    },
    "address": {
      "type": "Address",
      "fields": {
        "street": {
          "renderer": "defaultString",
          "visible": {
            "kind": "or",
            "operands": [
              {
                "kind": "fieldLookup",
                "operands": [
                  {
                    "kind": "varLookup",
                    "varName": "root"
                  },
                  "subscribeToNewsletter"
                ]
              },
              {
                "kind": "equals",
                "operands": [
                  {
                    "kind": "fieldLookup",
                    "operands": [
                      {
                        "kind": "varLookup",
                        "varName": "local"
                      },
                      "number"
                    ]
                  },
                  10
                ]
              }
            ]
          }
        },
        "number": {
          "renderer": "defaultNumber",
          "visible": true,
          "disabled": {
            "kind": "fieldLookup",
            "operands": [
              {
                "kind": "varLookup",
                "varName": "root"
              },
              "subscribeToNewsletter"
            ]
          }
        },
        "city": {
          "renderer": "defaultInfiniteStream",
          "stream": "cities",
          "visible": true
        }
      },
      "tabs": {
        "main": {
          "columns": {
            "main": {
              "groups": {
                "main": ["street", "number", "city"]
              }
            }
          }
        }
      }
    },
    "person": {
      "type": "Person",
      "fields": {
        "plotInfo": {
          "renderer": "plotInfo",
          "visible": true
        },
        "dependants": {
          "label": "dependants",
          "renderer": "defaultMap",
          "tooltip": "someone who depends on you",
          "keyRenderer": {
            "label": "name",
            "tooltip": "their name",
            "renderer": "defaultString"
          },
          "valueRenderer": {
            "label": "category",
            "tooltip": "their category",
            "renderer": "defaultCategory"
          },
          "visible": true
        },
        "relatives": {
          "label": "relatives",
          "tooltip": "someone who you are related to",
          "renderer": "defaultList",
          "elementRenderer": {
            "label": "one relative",
            "tooltip": "relative",
            "renderer": "defaultCategory"
          },
          "visible": true
        },
        "subscribeToNewsletter": {
          "label": "subscribe to newsletter",
          "renderer": "defaultBoolean",
          "visible": true
        },
        "departments": {
          "label": "departments",
          "renderer": "defaultInfiniteStreamMultiselect",
          "stream": "departments",
          "visible": true,
          "disabled": {
            "kind": "fieldLookup",
            "operands": [
              {
                "kind": "varLookup",
                "varName": "local"
              },
              "subscribeToNewsletter"
            ]
          }
        },
        "mainAddress": {
          "label": "main address",
          "renderer": "address",
          "visible": {
            "kind": "fieldLookup",
            "operands": [
              {
                "kind": "varLookup",
                "varName": "global"
              },
              "IsAdmin"
            ]
          }
        },
        "addresses": {
          "label": "other addresses",
          "renderer": "defaultList",
          "elementRenderer": {
            "label": "address",
            "renderer": "address"
          },
          "visible": true
        },
        "emails": {
          "label": "emails",
          "renderer": "defaultList",
          "elementRenderer": {
            "label": "email",
            "renderer": "defaultString"
          },
          "visible": true,
          "disabled": false
        },
        "permissions": {
          "label": "permissions",
          "renderer": "defaultMap",
          "keyRenderer": {
            "label": "permission",
            "renderer": "defaultEnum",
            "options": "permissions"
          },
          "valueRenderer": {
            "label": "granted",
            "renderer": "defaultBoolean"
          },
          "visible": true
        },
        "cityByDepartment": {
          "label": "city by department",
          "renderer": "defaultMap",
          "keyRenderer": {
            "label": "department",
            "renderer": "defaultInfiniteStream",
            "stream": "departments"
          },
          "valueRenderer": {
            "label": "city",
            "renderer": "defaultInfiniteStream",
            "stream": "cities"
          },
          "visible": true
        }
      },
      "tabs": {
        "main": {
          "columns": {
            "demographics": {
              "groups": {
                "main": ["plotInfo", "emails", "dependants", "relatives"]
              }
            },
            "mailing": {
              "groups": {
                "main": ["subscribeToNewsletter"]
              }
            },
            "addresses": {
              "groups": {
                "main": [
                  "departments",
                  "mainAddress",
                  "addresses",
                  "permissions",
                  "cityByDepartment"
                ]
              }
            }
          }
        }
      }
    }
  },
  "launchers": {
    "integrated-form": {
      "kind": "integrated",
      "form": "person",
      "globalConfigurationType": "GlobalConfiguration"
    }
  }
}
